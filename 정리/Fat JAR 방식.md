# 📍Fat JAR 방식

## 내장 톰캣을 사용하면서 WAR 파일 형식에서 JAR 파일 형식으로 넘어왔다.

### **하지만 JAR 파일을 실행시켜보니 에러가 발생한다!**

💡 **왜 그럴까?**  
→ JAR 파일 압축을 풀어 확인해보니 내가 작성한 코드들만 있을 뿐 내장 톰캣이나 다른 라이브러리 파일들이 하나도 없었다.  

외부 라이브러리들도 JAR 파일로 관리되어지기 때문에 JAR 파일안에 JAR 파일을 두는 것은 스펙에 맞지 않을 뿐더러 인식 하지도 못한다.  

그렇기 때문에 실행할 수 없는 것이였다!


## Fat JAR 등장

**결국 일반 JAR의 한계를 극복하기 위해 Fat JAR 방식이 등장했다.**

> **Fat JAR**
이름에서도 알 수 있듯이 뚱뚱한 JAR 파일이다.  
외부 라이브러리 파일들을 전부 압축을 풀어서 JAR 파일로 가지고 있는 것이 아닌,  
class 파일로 모두 가지고 있는 형태이다.  
>
- Fat JAR 덕분에 하나의 JAR 파일 안에 필요한 라이브러리들을 가질 수 있게 됐다.
- 그러므로 내장 톰캣 라이브러리 또한 JAR 파일 안에 둘 수 있다.
- 덕분에 하나의 JAR 파일로 배포 및 웹 서버 설치, 실행까지 단순화했다.

## 그렇다면 WAR 형식의 단점을 어떻게 극복했는지 살펴보자!

- **WAS 설치 필수**

  → 해결 : WAS를 별도로 설치하지 않고 라이브러리 형태로 JAR 파일 안에 포함된다.

- **복잡한 개발 환경 설정**
    - WAS 실행 및 WAR 연동을 위한 복잡한 설정들
      → 해결 : IDE에 복잡한 설정 대신 단순히 `main()` 메소드만 실행하면 된다.
- **복잡한 배포 과정**
    - WAR 빌드 후 WAS 전달 및 배포
      → 해결 : JAR 파일을 만들고 원하는 위치에서 실행 시키기만 하면 된다.
- **WAS 버전 변경 시, 재설치**

  → 해결 : `build.gradle` 파일에서 내장 톰캣 라이브러리 버전 변경 및 빌드 후 실행하면 된다.


## 하지만 완벽해보이는 Fat JAR도 단점을 가지고 있다…

- 전부 class 파일로 되어있기 때문에 어떤 라이브러리가 사용되는지 추적이 어렵다.
- **파일명 중복을 해결할 수 없다. (중요)**
    - 여러 라이브러리가 중복된 경로 및 파일명을 가질 수 있다.
    - 중복된 경우엔 둘 중 하나의 파일만 선택되어 실행된다.
    - 그렇기 때문에 심각한 문제가 발생할 수 있으며 정상 실행되지 않는다.


## 이제 스프링 부트가 이런 문제점들을 어떤식으로 해결하는지 알아보자!